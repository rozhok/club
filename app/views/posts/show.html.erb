<% content_for(:title) { "#{@post.title} | –†—ñ–∂–æ–∫ –ö–ª—É–±" } %>
<% content_for(:og_image) { @post.og_image } %>
<div class="container mx-auto w-7/8">
  <div class="card card-border shadow-sm mb-8">
    <div class="card-body prose text-black !max-w-none">
      <% case @post.state %>
      <% when "pending" %>
        <div role="alert" class="alert alert-warning">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 shrink-0 stroke-current" fill="none" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
          </svg>
          <span>–ü–æ—Å—Ç –æ—á—ñ–∫—É—î —Å—Ö–≤–∞–ª–µ–Ω–Ω—è</span>
        </div>
      <% when "rejected" %>
        <div role="alert" class="alert alert-error">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 shrink-0 stroke-current" fill="none" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"/>
          </svg>
          <span>–ü–æ—Å—Ç –ø–æ—Ç—Ä–µ–±—É—î –¥–æ–ø—Ä–∞—Ü—é–≤–∞–Ω–Ω—è</span>
        </div>
      <% end %>
      <h1 class="!mb-0 card-title text-3xl font-bold"><%= @post.full_title %></h1>
      <% if @post.post_type == "link" || @post.post_type == "project" %>
        <h2 class="!mb-0 !mt-0 text-xl font-bold">
          <span>üëâ</span><%= link_to @post.link, @post.link.html_safe, class: "link" %></h2>
      <% end %>
      <%= @post.content %>
    </div>

    <div class="card-actions justify-end p-4 pt-0 pr-6">
      <% if @post.state == "pending" %>
        <% if can? :approve, Post %>
          <%= button_to approve_post_path(@post), method: :patch, class: "btn btn-sm btn-success btn-outline" do %>
            <span>‚úÖ</span><span>–ó–∞—Ç–≤–µ—Ä–¥–∏—Ç–∏</span>
          <% end %>
        <% end %>
        <% if can? :reject, Post %>
          <%= button_to reject_post_path(@post), method: :patch, class: "btn btn-sm btn-warning btn-outline" do %>
            <span>‚ùå</span><span>–ù–∞ –¥–æ–æ–ø—Ä–∞—Ü—é–≤–∞–Ω–Ω—è</span>
          <% end %>
        <% end %>
      <% end %>
      <% if can? :update, @post %>
        <%= link_to edit_post_path(@post.id), class: "btn btn-sm btn-neutral btn-outline" do %>
          <span>üìù</span><span>–†–µ–¥–∞–≥—É–≤–∞—Ç–∏</span>
        <% end %>
      <% end %>
    </div>
  </div>

  <%= render partial: "users/profile", locals: { user: @post.user } %>

  <h2 class="text-xl mb-8">–ö–æ–º–µ–Ω—Ç–∞—Ä—ñüëá</h2>

  <%= turbo_frame_tag "new_comment_form" do %>
    <%= render partial: "comments/form", locals: { post: @post, comment: @post.comments.build } %>
  <% end %>

  <%= render @comments %>

  <%= turbo_frame_tag Comment.new %>
</div>
